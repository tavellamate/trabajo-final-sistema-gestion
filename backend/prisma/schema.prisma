generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Rol {
  ABOGADO
  SECRETARIO
}

model Usuario {
  id         Int          @id @default(autoincrement())
  nombre     String
  email      String       @unique
  password   String
  rol        Rol
  expedientes Expediente[]
  escritosCreados Escrito[] @relation("UsuarioEscritosCreados")
}


model Expediente {
  id                    Int       @id @default(autoincrement())
  titulo                String
  numeroCarpeta         String
  instancia             String
  numeroExpediente      String
  cliente               String
  contrario             String
  tipoProceso           String
  fechaInicio           DateTime
  fechaUltimoMovimiento DateTime
  estado                String
  usuarioId             Int
  usuario               Usuario   @relation(fields: [usuarioId], references: [id])
  escritos              Escrito[]
  eventos               Evento[]
}

model Escrito {
  id           Int      @id @default(autoincrement())
  titulo       String
  descripcion  String?
  archivoUrl   String
  expediente   Expediente @relation(fields: [expedienteId], references: [id])
  expedienteId Int
  creadoPor    Usuario  @relation("UsuarioEscritosCreados", fields: [creadoPorId], references: [id])
  creadoPorId  Int
  createdAt    DateTime @default(now())
}


model Evento {
  id           Int        @id @default(autoincrement())
  descripcion  String
  fecha        DateTime
  estado       String
  expedienteId Int
  expediente   Expediente @relation(fields: [expedienteId], references: [id])
}

model Causa {
  id        Int    @id @default(autoincrement())
  tipo      String
  cliente   String
  resumen   String
}
